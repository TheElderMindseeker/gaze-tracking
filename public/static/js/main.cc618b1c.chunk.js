(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(47)},25:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(12),s=a.n(o),r=(a(25),a(13)),c=a(14),d=a(17),l=a(15),u=a(18),m=a(16),g=a.n(m),h=a(2),p=a.n(h),f=(a(46),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(d.a)(this,Object(l.a)(t).call(this,e))).generateCoordinates=function(e,t){return{x:"number"===typeof e?e:(1280*Math.random()).toFixed(),y:"number"===typeof t?t:(720*Math.random()).toFixed()}},a.setRef=function(e){a.webcam=e},a.capture=function(){var e=a.webcam.getScreenshot();p.a.post("/train",{frame:e,model_id:a.state.uuid,coord_x:a.state.coordinates.x,coord_y:a.state.coordinates.y}).then(function(e){200===e.status&&a.setState(function(e){var t=e.sentImages+1;return t===e.amountOfSamples&&a.enableProduction(),{sentImages:t,coordinates:a.generateCoordinates()}})})},a.enableProduction=function(){a.setState({stage:"production",message:"Model trained. Just look at the image!"}),a.poll()},a.poll=function(){var e=a.webcam.getScreenshot();p.a.post("/analyze",{frame:e,model_id:a.state.uuid,index:a.state.imageIndex}).then(function(e){200===e.status&&(a.setState({coordinates:a.generateCoordinates(e.data.coord_x,e.data.coord_y),imageIndex:e.data.index,imageUrl:e.data.image_url}),setTimeout(function(){return a.poll()},1e3))})},a.state={initialized:!1,coordinates:a.generateCoordinates(),sentImages:0,amountOfSamples:0,uuid:void 0,stage:"training",imageIndex:0,imageUrl:"",message:"Look at the circle and click on it"},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.a.get("/new").then(function(t){200===t.status&&e.setState({initialized:!0,uuid:t.data.model_id,amountOfSamples:t.data.n_samples})})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h3",null,this.state.message),i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"webcam"},i.a.createElement(g.a,{audio:!1,height:720,ref:this.setRef,screenshotFormat:"image/jpeg",width:1280,videoConstraints:{width:1280,height:720,facingMode:"user"}})),i.a.createElement("div",{className:"canvas"}),this.state.initialized&&"training"===this.state.stage?i.a.createElement("button",{className:"point",style:{top:this.state.coordinates.y+"px",left:this.state.coordinates.x+"px"},onClick:this.capture}):i.a.createElement(n.Fragment,null,i.a.createElement("img",{className:"image",src:this.state.imageUrl}),i.a.createElement("span",{className:"plus",style:{top:this.state.coordinates.y+"px",left:this.state.coordinates.x+"px"}},"+"))))}}]),t}(i.a.Component));s.a.render(i.a.createElement(f,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.cc618b1c.chunk.js.map